<!-- admin.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard | David IGE</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Google Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-dark: #0c2039;
            --primary: #1a365d;
            --primary-light: #2d4a7a;
            --accent-gold: #b59410;
            --accent-gold-light: #d4b95a;
            --success: #1e7e34;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --dark: #121212;
            --dark-gray: #2d3748;
            --medium-gray: #4a5568;
            --light-gray: #e2e8f0;
            --light: #f8fafc;
            --white: #ffffff;
            
            --shadow-subtle: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-soft: 0 4px 12px rgba(0,0,0,0.08);
            --shadow-medium: 0 8px 24px rgba(0,0,0,0.12);
            
            --radius-sm: 4px;
            --radius-md: 8px;
            --radius-lg: 12px;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--light);
            color: var(--dark);
        }
        
        /* Login Page */
        .login-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            padding: 20px;
        }
        
        .login-box {
            background: var(--white);
            padding: 40px;
            border-radius: var(--radius-lg);
            width: 100%;
            max-width: 400px;
            box-shadow: var(--shadow-medium);
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .login-header h1 {
            color: var(--primary);
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .login-header p {
            color: var(--medium-gray);
        }
        
        .login-form .form-group {
            margin-bottom: 20px;
        }
        
        .login-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .login-form input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--light-gray);
            border-radius: var(--radius-sm);
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .login-form input:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 3px rgba(181,148,16,0.1);
        }
        
        .login-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: var(--white);
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .login-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-soft);
        }
        
        .login-error {
            color: var(--danger);
            margin-top: 15px;
            text-align: center;
            display: none;
        }
        
        /* Admin Panel */
        .admin-panel {
            display: none;
            min-height: 100vh;
        }
        
        .admin-header {
            background: var(--white);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--light-gray);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            box-shadow: var(--shadow-subtle);
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 30px;
        }
        
        .menu-toggle {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--primary);
            display: none;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo-icon {
            width: 40px;
            height: 40px;
            background: var(--primary);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
        }
        
        .logo-text h2 {
            font-size: 1.2rem;
            color: var(--primary);
        }
        
        .logo-text p {
            font-size: 0.7rem;
            color: var(--medium-gray);
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .admin-profile {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .admin-info {
            text-align: right;
        }
        
        .admin-name {
            font-weight: 600;
        }
        
        .admin-role {
            font-size: 0.85rem;
            color: var(--medium-gray);
        }
        
        .admin-avatar {
            width: 45px;
            height: 45px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 600;
        }
        
        .logout-btn {
            background: none;
            border: 1px solid var(--light-gray);
            padding: 8px 16px;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .logout-btn:hover {
            background: var(--danger);
            color: var(--white);
            border-color: var(--danger);
        }
        
        /* Sidebar */
        .admin-sidebar {
            position: fixed;
            top: 76px;
            left: 0;
            bottom: 0;
            width: 260px;
            background: linear-gradient(180deg, var(--primary-dark), var(--primary));
            color: var(--white);
            overflow-y: auto;
            transition: all 0.3s;
            z-index: 99;
        }
        
        .sidebar-nav {
            list-style: none;
            padding: 20px 0;
        }
        
        .nav-item {
            margin-bottom: 5px;
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            color: rgba(255,255,255,0.7);
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
            font-size: 1rem;
        }
        
        .nav-link:hover,
        .nav-link.active {
            background: rgba(255,255,255,0.1);
            color: var(--white);
        }
        
        .nav-link .material-symbols-outlined {
            font-size: 20px;
        }
        
        /* Main Content */
        .admin-main {
            margin-left: 260px;
            margin-top: 76px;
            padding: 30px;
            transition: all 0.3s;
        }
        
        /* Page Header */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .page-header h1 {
            color: var(--primary);
            font-size: 2rem;
        }
        
        .page-header p {
            color: var(--medium-gray);
        }
        
        .header-actions {
            display: flex;
            gap: 15px;
        }
        
        .action-btn {
            padding: 10px 20px;
            background: var(--white);
            border: 1px solid var(--light-gray);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .action-btn:hover {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }
        
        .action-btn.primary {
            background: var(--primary);
            color: var(--white);
            border-color: var(--primary);
        }
        
        .action-btn.success {
            background: var(--success);
            color: var(--white);
            border-color: var(--success);
        }
        
        .action-btn.danger {
            background: var(--danger);
            color: var(--white);
            border-color: var(--danger);
        }
        
        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: var(--white);
            padding: 25px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-subtle);
            display: flex;
            align-items: center;
            gap: 20px;
            border: 1px solid var(--light-gray);
            transition: all 0.3s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            border-color: var(--accent-gold);
            box-shadow: var(--shadow-soft);
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
        }
        
        .stat-content h3 {
            font-size: 2rem;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .stat-content p {
            color: var(--medium-gray);
        }
        
        /* Content Sections */
        .content-section {
            background: var(--white);
            border-radius: var(--radius-md);
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid var(--light-gray);
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--light-gray);
        }
        
        .section-header h2 {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        /* Tables */
        .table-responsive {
            overflow-x: auto;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .data-table th {
            text-align: left;
            padding: 12px;
            background: var(--light);
            color: var(--primary);
            font-weight: 600;
            border-bottom: 2px solid var(--accent-gold);
        }
        
        .data-table td {
            padding: 12px;
            border-bottom: 1px solid var(--light-gray);
            color: var(--dark-gray);
        }
        
        .data-table tr:hover td {
            background: var(--light);
        }
        
        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 30px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        
        .status-pending { background: #fff3cd; color: #856404; }
        .status-approved { background: #d4edda; color: #155724; }
        .status-replied { background: #cce5ff; color: #004085; }
        
        .table-actions {
            display: flex;
            gap: 8px;
        }
        
        .table-btn {
            background: none;
            border: none;
            padding: 8px;
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .table-btn:hover {
            background: var(--light);
        }
        
        .table-btn.view:hover { color: var(--info); }
        .table-btn.edit:hover { color: var(--primary); }
        .table-btn.reply:hover { color: var(--success); }
        .table-btn.delete:hover { color: var(--danger); }
        
        /* Settings Sections */
        .settings-section {
            margin-bottom: 30px;
            padding: 25px;
            background: var(--light);
            border-radius: var(--radius-md);
        }
        
        .settings-section h3 {
            color: var(--primary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .setting-item {
            background: var(--white);
            padding: 20px;
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow-subtle);
        }
        
        .setting-label {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 8px;
        }
        
        .setting-value {
            color: var(--primary);
            font-size: 1.1rem;
            line-height: 1.5;
            word-break: break-word;
        }
        
        /* Forms */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--light-gray);
            border-radius: var(--radius-sm);
            font-family: inherit;
            font-size: 0.95rem;
            transition: all 0.3s;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--accent-gold);
            box-shadow: 0 0 0 3px rgba(181,148,16,0.1);
        }
        
        textarea.form-control {
            min-height: 100px;
            resize: vertical;
        }
        
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
        }
        
        .save-btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: var(--white);
            border: none;
            border-radius: var(--radius-sm);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-soft);
        }
        
        .save-btn.success {
            background: linear-gradient(135deg, var(--success), #2a9d8f);
        }
        
        .save-btn.danger {
            background: linear-gradient(135deg, var(--danger), #e76f51);
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: var(--white);
            width: 600px;
            max-width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-medium);
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: var(--white);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1;
        }
        
        .modal-header h3 {
            color: var(--white);
            font-size: 1.3rem;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--white);
            cursor: pointer;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: var(--radius-sm);
        }
        
        .modal-close:hover {
            background: rgba(255,255,255,0.1);
        }
        
        .modal-body {
            padding: 25px;
        }
        
        .modal-footer {
            padding: 20px;
            border-top: 1px solid var(--light-gray);
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            position: sticky;
            bottom: 0;
            background: var(--white);
        }
        
        /* Detail View */
        .detail-view {
            padding: 20px;
        }
        
        .detail-item {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--light-gray);
        }
        
        .detail-item:last-child {
            border-bottom: none;
        }
        
        .detail-label {
            font-size: 0.9rem;
            color: var(--medium-gray);
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        
        .detail-value {
            font-size: 1.1rem;
            color: var(--dark);
            font-weight: 500;
            line-height: 1.6;
        }
        
        .message-box {
            background: var(--light);
            padding: 20px;
            border-radius: var(--radius-md);
            border-left: 4px solid var(--accent-gold);
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        .reply-section {
            margin-top: 30px;
            padding: 20px;
            background: var(--light);
            border-radius: var(--radius-md);
        }
        
        .reply-section h4 {
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .reply-history {
            margin-top: 20px;
        }
        
        .reply-item {
            background: var(--white);
            padding: 15px;
            border-radius: var(--radius-sm);
            margin-bottom: 10px;
            border-left: 3px solid var(--success);
        }
        
        .reply-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .reply-author {
            font-weight: 600;
            color: var(--primary);
        }
        
        .reply-date {
            font-size: 0.85rem;
            color: var(--medium-gray);
        }
        
        .reply-content {
            color: var(--dark-gray);
            line-height: 1.5;
        }
        
        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--white);
            padding: 15px 25px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-medium);
            display: flex;
            align-items: center;
            gap: 15px;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 2000;
            border-left: 4px solid var(--primary);
        }
        
        .toast.show {
            transform: translateX(0);
        }
        
        .toast-success {
            border-left-color: var(--success);
        }
        
        .toast-error {
            border-left-color: var(--danger);
        }
        
        .toast-info {
            border-left-color: var(--info);
        }
        
        /* Responsive */
        @media (max-width: 992px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .menu-toggle {
                display: block;
            }
            
            .admin-sidebar {
                transform: translateX(-100%);
            }
            
            .admin-sidebar.active {
                transform: translateX(0);
            }
            
            .admin-main {
                margin-left: 0;
            }
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .header-right {
                display: none;
            }
            
            .page-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .page-header h1 {
                font-size: 1.5rem;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .action-buttons button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div class="login-container" id="loginPage">
        <div class="login-box">
            <div class="login-header">
                <h1>Admin Login</h1>
                <p>Enter your credentials to access the dashboard</p>
            </div>
            <form class="login-form" id="loginForm">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="username" value="admin" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="password" placeholder="Enter 0000" required>
                </div>
                <button type="submit" class="login-btn">Login to Dashboard</button>
                <div class="login-error" id="loginError">Invalid credentials. Use 0000 as password.</div>
            </form>
            <div style="text-align: center; margin-top: 20px; color: var(--medium-gray); font-size: 0.9rem;">
                Demo: Use any username with password 0000
            </div>
        </div>
    </div>
    
    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <!-- Header -->
        <header class="admin-header">
            <div class="header-left">
                <button class="menu-toggle" id="menuToggle">
                    <span class="material-symbols-outlined">menu</span>
                </button>
                <div class="logo">
                    <div class="logo-icon">
                        <span class="material-symbols-outlined">admin_panel_settings</span>
                    </div>
                    <div class="logo-text">
                        <h2>Admin Panel</h2>
                        <p>David IGE Portfolio</p>
                    </div>
                </div>
            </div>
            <div class="header-right">
                <div class="admin-profile">
                    <div class="admin-info">
                        <div class="admin-name" id="adminName">Admin User</div>
                        <div class="admin-role">Administrator</div>
                    </div>
                    <div class="admin-avatar" id="adminAvatar">AD</div>
                </div>
                <button class="logout-btn" id="logoutBtn">
                    <span class="material-symbols-outlined">logout</span> Logout
                </button>
            </div>
        </header>
        
        <!-- Sidebar -->
        <aside class="admin-sidebar" id="adminSidebar">
            <ul class="sidebar-nav">
                <li class="nav-item">
                    <button class="nav-link active" onclick="loadSection('dashboard', this)">
                        <span class="material-symbols-outlined">dashboard</span>
                        Dashboard
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" onclick="loadSection('contacts', this)">
                        <span class="material-symbols-outlined">mail</span>
                        Contact Requests
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" onclick="loadSection('requests', this)">
                        <span class="material-symbols-outlined">info</span>
                        Info Requests
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" onclick="loadSection('comments', this)">
                        <span class="material-symbols-outlined">comment</span>
                        Comments
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" onclick="loadSection('site-content', this)">
                        <span class="material-symbols-outlined">edit_note</span>
                        Site Content
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" onclick="loadSection('appearance', this)">
                        <span class="material-symbols-outlined">palette</span>
                        Appearance
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" onclick="loadSection('settings', this)">
                        <span class="material-symbols-outlined">settings</span>
                        Settings
                    </button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" onclick="loadSection('profile', this)">
                        <span class="material-symbols-outlined">person</span>
                        Profile
                    </button>
                </li>
            </ul>
        </aside>
        
        <!-- Main Content -->
        <main class="admin-main" id="mainContent">
            <!-- Content will be loaded dynamically -->
        </main>
    </div>
    
    <!-- Toast Notification -->
    <div class="toast" id="toast">
        <span class="material-symbols-outlined" id="toastIcon">info</span>
        <span id="toastMessage">Notification message</span>
    </div>
    
    <!-- Modal -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">Edit Item</h3>
                <button class="modal-close" onclick="closeModal()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Dynamic form content -->
            </div>
            <div class="modal-footer">
                <button class="action-btn" onclick="closeModal()">Cancel</button>
                <button class="save-btn" onclick="saveItem()">Save Changes</button>
            </div>
        </div>
    </div>
    
    <!-- View Modal -->
    <div class="modal" id="viewModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="viewModalTitle">View Details</h3>
                <button class="modal-close" onclick="closeViewModal()">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div class="modal-body" id="viewModalBody">
                <!-- Dynamic view content -->
            </div>
            <div class="modal-footer">
                <button class="action-btn" onclick="closeViewModal()">Close</button>
            </div>
        </div>
    </div>
    
    <script>
        // ==================== GLOBAL VARIABLES ====================
        let currentEditType = '';
        let currentEditIndex = -1;
        let currentViewId = null;
        let currentViewType = '';
        
        // ==================== INITIALIZATION ====================
        document.addEventListener('DOMContentLoaded', function() {
            // Get DOM elements
            const loginPage = document.getElementById('loginPage');
            const adminPanel = document.getElementById('adminPanel');
            const loginForm = document.getElementById('loginForm');
            const logoutBtn = document.getElementById('logoutBtn');
            const menuToggle = document.getElementById('menuToggle');
            const adminSidebar = document.getElementById('adminSidebar');
            
            // Initialize localStorage with default data if empty
            initializeData();
            
            // Show login page by default
            if (loginPage && adminPanel) {
                loginPage.style.display = 'flex';
                adminPanel.style.display = 'none';
            }
            
            // Login form handler
            if (loginForm) {
                loginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    handleLogin();
                });
            }
            
            // Logout handler
            if (logoutBtn) {
                logoutBtn.addEventListener('click', handleLogout);
            }
            
            // Menu toggle handler
            if (menuToggle && adminSidebar) {
                menuToggle.addEventListener('click', function() {
                    adminSidebar.classList.toggle('active');
                });
            }
        });
        
        // ==================== DATA INITIALIZATION ====================
        function initializeData() {
            // Default site data (from data.js)
            const defaultSiteData = {
                personal: {
                    name: "David Oloruntobi IGE",
                    title: "Senior Product/Programmes Manager",
                    role: "Product Growth & Operations Lead",
                    location: "Lagos, Nigeria",
                    email: "david.ige@example.com",
                    phone: "+234 803 456 7890",
                    about: "High-driven Product/Programmes Manager with 6+ years of experience in scaling Digital programmes and Fintech solutions across Africa. Expertly combines Agile methodologies with data-driven strategies to deliver innovative B2B2C solutions, driving significant user adoption and revenue growth.",
                    shortBio: "Product leader driving innovation in African fintech and digital programmes, with a track record of scaling products from 0 to 1M+ users across multiple African countries.",
                    availability: "Open to Product Leadership Opportunities & Strategic Consultations",
                    image: "/assets/me.png",
                    logo: "/assets/logo.png",
                    social: {
                        linkedin: "https://linkedin.com/in/davidige",
                        twitter: "https://twitter.com/davidige",
                        github: "https://github.com/davidige",
                        medium: "https://medium.com/@davidige"
                    }
                },
                work: [
                    { 
                        company: "DTOTAL TECH CONSULT", 
                        title: "Product/Programme Manager", 
                        period: "Feb 2025 - Present", 
                        location: "Lagos, Nigeria", 
                        summary: "Leading AI product development at AI Products Lab",
                        highlights: [
                            "Developed and executed data-driven product strategies",
                            "Enhanced cross-functional team collaboration",
                            "Drove adoption of LiminAI and ExamineAI products"
                        ]
                    },
                    { 
                        company: "GCTN Fintech Group", 
                        title: "PRODUCT/OPERATIONS MANAGER", 
                        period: "Jan 2024 - Feb 2025", 
                        location: "Lagos, Nigeria", 
                        summary: "Managed product and operations for fintech group",
                        highlights: [
                            "Achieved 500% user growth across 5 African countries",
                            "Directed redesign of KOYNOVA and RIDIMA products",
                            "Increased combined Userbase from 210K to over 1 Million users"
                        ]
                    },
                    { 
                        company: "ASIKO ENERGY HOLDINGS", 
                        title: "PRODUCT MANAGER/TECH LEAD", 
                        period: "May 2024 - Dec 2024", 
                        location: "Lagos, Nigeria", 
                        summary: "Led product and tech initiatives for Oil & Gas company",
                        highlights: [
                            "Successfully deployed enterprise ERP System",
                            "Authored comprehensive product requirements",
                            "Improved operational efficiency by over 10%"
                        ]
                    }
                ],
                skills: [
                    { 
                        category: "Product Strategy & Roadmapping", 
                        skills: [
                            {name: "Product Vision", level: 95},
                            {name: "Roadmap Development", level: 95},
                            {name: "Feature Prioritization", level: 90},
                            {name: "Strategic Planning", level: 90}
                        ] 
                    },
                    { 
                        category: "Product Execution", 
                        skills: [
                            {name: "UX Research", level: 85},
                            {name: "Documentation", level: 90},
                            {name: "Product Delivery", level: 95},
                            {name: "Product Lifecycle Management", level: 90}
                        ] 
                    },
                    { 
                        category: "Product Data Analytics", 
                        skills: [
                            {name: "SQL Data Query", level: 80},
                            {name: "Data Aggregation", level: 85},
                            {name: "Metrics Dashboards", level: 90},
                            {name: "User Feedback Analysis", level: 95}
                        ] 
                    }
                ],
                certificates: [
                    { name: "ASANA Workflow Implementation Specialist", issuer: "ASANA Academy", date: "Jan 2025", credentialId: "ASANA-001", link: "#" },
                    { name: "Building/Managing AI Products", issuer: "Marily-Nika", date: "Jan 2023", credentialId: "AI-045", link: "#" },
                    { name: "Design, Product, and Developer Programme", issuer: "UK-Nigeria Tech Hub", date: "Jan 2022", credentialId: "DPD-078", link: "#" },
                    { name: "Certified Product Manager", issuer: "UDEMY", date: "Jan 2021", credentialId: "CPM-234", link: "#" },
                    { name: "Agile Certified Product Manager", issuer: "IBM", date: "Jan 2021", credentialId: "IBM-567", link: "#" }
                ],
                education: [
                    { 
                        degree: "MBA - Technology Business Management", 
                        institution: "QUANTIC School of Business, USA", 
                        period: "2023-2025", 
                        location: "Remote",
                        description: "Executive MBA program focused on technology business management and strategic leadership"
                    },
                    { 
                        degree: "B.Sc. Biochemistry and Molecular Biology", 
                        institution: "University of Ilorin, Nigeria", 
                        period: "2012-2016", 
                        location: "Ilorin, Nigeria",
                        description: "Second Class Honours (Upper Division)"
                    }
                ],
                projects: [
                    { 
                        id: "dt-realty", 
                        title: "DT Realty Advisory", 
                        subtitle: "Vibe-coding Digital Realty Product", 
                        category: "AI Product", 
                        featured: true, 
                        tags: ["AI", "Real Estate", "PropTech"],
                        summary: "Digital realty product aimed at empowering users with requisite historical and investment data.",
                        image: "/assets/projects/dt-realty.jpg"
                    },
                    { 
                        id: "liminai", 
                        title: "LiminAI", 
                        subtitle: "AI-Powered Document Analysis", 
                        category: "AI Product", 
                        featured: true, 
                        tags: ["AI", "Document Processing", "Enterprise"],
                        summary: "Intelligent document analysis platform using advanced AI to extract insights.",
                        image: "/assets/projects/liminai.jpg"
                    },
                    { 
                        id: "examineai", 
                        title: "ExamineAI", 
                        subtitle: "Automated Examination Platform", 
                        category: "EdTech", 
                        featured: true, 
                        tags: ["Education", "AI", "Assessment"],
                        summary: "AI-powered platform for creating, administering, and grading examinations.",
                        image: "/assets/projects/examineai.jpg"
                    }
                ],
                testimonials: [
                    {
                        id: 1,
                        name: "Adekunle Ogunleye",
                        position: "CEO, TechVentures Africa",
                        content: "David is one of the most strategic product leaders I've worked with.",
                        rating: 5,
                        image: "/assets/testimonials/adekunle.jpg"
                    }
                ]
            };
            
            // Initialize localStorage with default data if empty
            if (!localStorage.getItem('siteData')) {
                localStorage.setItem('siteData', JSON.stringify(defaultSiteData));
            }
            
            if (!localStorage.getItem('contacts')) {
                localStorage.setItem('contacts', JSON.stringify([
                    { 
                        id: 1, 
                        name: 'John Doe', 
                        email: 'john@example.com', 
                        company: 'Tech Corp', 
                        subject: 'Consultation Inquiry', 
                        message: 'I am interested in discussing product strategy consultation for our fintech startup. We are looking to scale our product across West Africa.',
                        date: '2025-02-15', 
                        status: 'pending',
                        replies: []
                    },
                    { 
                        id: 2, 
                        name: 'Jane Smith', 
                        email: 'jane@example.com', 
                        company: 'FinTech Ltd', 
                        subject: 'Partnership Opportunity', 
                        message: 'We would like to explore partnership opportunities for our new digital lending platform.',
                        date: '2025-02-14', 
                        status: 'replied',
                        replies: [
                            {
                                id: 101,
                                date: '2025-02-14 14:30',
                                message: 'Thank you for reaching out. I would be happy to discuss partnership opportunities. Please let me know your availability for a call.',
                                admin: true
                            }
                        ]
                    }
                ]));
            }
            
            if (!localStorage.getItem('requests')) {
                localStorage.setItem('requests', JSON.stringify([
                    { 
                        id: 1, 
                        name: 'Mike Johnson', 
                        email: 'mike@example.com', 
                        company: 'Tech Corp', 
                        position: 'CEO', 
                        requestType: 'cv', 
                        details: 'Please send your CV for review. We have a Product Director opening that might interest you.',
                        date: '2025-02-15', 
                        status: 'pending',
                        replies: []
                    },
                    { 
                        id: 2, 
                        name: 'Sarah Williams', 
                        email: 'sarah@example.com', 
                        company: 'FinTech Ltd', 
                        position: 'Product Director', 
                        requestType: 'consultation', 
                        details: 'Need product consultation for our new mobile banking app. Looking for strategic guidance on user adoption.',
                        date: '2025-02-13', 
                        status: 'approved',
                        replies: [
                            {
                                id: 201,
                                date: '2025-02-13 10:15',
                                message: 'I have reviewed your request and would be happy to provide consultation. I will send you my availability shortly.',
                                admin: true
                            }
                        ]
                    }
                ]));
            }
            
            if (!localStorage.getItem('comments')) {
                localStorage.setItem('comments', JSON.stringify([
                    { 
                        id: 1, 
                        projectId: 'dt-realty', 
                        name: 'Adekunle Ola', 
                        email: 'a.ola@example.com', 
                        comment: 'This is exactly what the Nigerian real estate market needs! The investment scoring feature is brilliant.',
                        rating: 5, 
                        date: '2025-02-15', 
                        approved: false, 
                        likes: 12, 
                        hearts: 8,
                        replies: []
                    },
                    { 
                        id: 2, 
                        projectId: 'liminai', 
                        name: 'Femi Adebayo', 
                        email: 'femi.a@example.com', 
                        comment: 'We\'ve been using LiminAI at our law firm for 3 months now. It\'s cut our document review time by 70%!',
                        rating: 5, 
                        date: '2025-02-14', 
                        approved: true, 
                        likes: 24, 
                        hearts: 15,
                        replies: [
                            {
                                id: 101,
                                date: '2025-02-14 15:30',
                                comment: 'Thank you Femi! We\'re constantly improving the models.',
                                admin: true
                            }
                        ]
                    }
                ]));
            }
            
            if (!localStorage.getItem('appearance')) {
                localStorage.setItem('appearance', JSON.stringify({
                    primaryColor: '#1a365d',
                    accentColor: '#b59410',
                    bgColor: '#f8fafc',
                    headingFont: 'Playfair Display',
                    bodyFont: 'Inter',
                    showSidebar: true,
                    showRelated: true,
                    enableComments: true
                }));
            }
        }
        
        // ==================== LOGIN SYSTEM ====================
        function handleLogin() {
            const password = document.getElementById('password').value;
            const loginPage = document.getElementById('loginPage');
            const adminPanel = document.getElementById('adminPanel');
            const adminName = document.getElementById('adminName');
            const loginError = document.getElementById('loginError');
            
            if (password === '0000') {
                loginPage.style.display = 'none';
                adminPanel.style.display = 'block';
                if (adminName) {
                    adminName.textContent = document.getElementById('username').value || 'Admin User';
                }
                loadSection('dashboard', document.querySelector('.nav-link'));
            } else {
                if (loginError) {
                    loginError.style.display = 'block';
                }
            }
        }
        
        function handleLogout() {
            const loginPage = document.getElementById('loginPage');
            const adminPanel = document.getElementById('adminPanel');
            const password = document.getElementById('password');
            const loginError = document.getElementById('loginError');
            
            if (loginPage && adminPanel) {
                loginPage.style.display = 'flex';
                adminPanel.style.display = 'none';
                if (password) password.value = '';
                if (loginError) loginError.style.display = 'none';
            }
        }
        
        // ==================== NAVIGATION ====================
        function loadSection(section, element) {
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            if (element) {
                element.classList.add('active');
            }
            
            const mainContent = document.getElementById('mainContent');
            if (!mainContent) return;
            
            switch(section) {
                case 'dashboard':
                    mainContent.innerHTML = getDashboardHTML();
                    loadDashboardData();
                    break;
                case 'contacts':
                    mainContent.innerHTML = getContactsHTML();
                    loadContactsData();
                    break;
                case 'requests':
                    mainContent.innerHTML = getRequestsHTML();
                    loadRequestsData();
                    break;
                case 'comments':
                    mainContent.innerHTML = getCommentsHTML();
                    loadCommentsData();
                    break;
                case 'site-content':
                    mainContent.innerHTML = getSiteContentHTML();
                    loadSiteContentData();
                    break;
                case 'appearance':
                    mainContent.innerHTML = getAppearanceHTML();
                    loadAppearanceData();
                    break;
                case 'settings':
                    mainContent.innerHTML = getSettingsHTML();
                    break;
                case 'profile':
                    mainContent.innerHTML = getProfileHTML();
                    loadProfileData();
                    break;
            }
            
            // Close sidebar on mobile
            const adminSidebar = document.getElementById('adminSidebar');
            if (window.innerWidth <= 992 && adminSidebar) {
                adminSidebar.classList.remove('active');
            }
        }
        
        // ==================== TOAST NOTIFICATION ====================
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            const toastIcon = document.getElementById('toastIcon');
            const toastMessage = document.getElementById('toastMessage');
            
            if (!toast || !toastIcon || !toastMessage) return;
            
            // Set icon based on type
            const icons = {
                success: 'check_circle',
                error: 'error',
                info: 'info',
                warning: 'warning'
            };
            toastIcon.textContent = icons[type] || 'info';
            
            // Set message
            toastMessage.textContent = message;
            
            // Set class
            toast.className = 'toast';
            toast.classList.add(`toast-${type}`);
            
            // Show toast
            toast.classList.add('show');
            
            // Hide after 3 seconds
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
        
        // ==================== DASHBOARD ====================
        function getDashboardHTML() {
            return `
                <div class="page-header">
                    <div>
                        <h1>Dashboard</h1>
                        <p>Welcome back! Here's what's happening with your site.</p>
                    </div>
                </div>
                
                <div class="stats-grid" id="dashboardStats"></div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h2>
                            <span class="material-symbols-outlined">mail</span>
                            Recent Contact Requests
                        </h2>
                        <button class="action-btn" onclick="loadSection('contacts', document.querySelector('.nav-link[onclick*=\\'contacts\\']'))">
                            <span class="material-symbols-outlined">arrow_forward</span>
                            View All
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Subject</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="recentContactsBody"></tbody>
                        </table>
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h2>
                            <span class="material-symbols-outlined">info</span>
                            Recent Info Requests
                        </h2>
                        <button class="action-btn" onclick="loadSection('requests', document.querySelector('.nav-link[onclick*=\\'requests\\']'))">
                            <span class="material-symbols-outlined">arrow_forward</span>
                            View All
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Company</th>
                                    <th>Request Type</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="recentRequestsBody"></tbody>
                        </table>
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h2>
                            <span class="material-symbols-outlined">comment</span>
                            Pending Comments
                        </h2>
                        <button class="action-btn" onclick="loadSection('comments', document.querySelector('.nav-link[onclick*=\\'comments\\']'))">
                            <span class="material-symbols-outlined">arrow_forward</span>
                            Moderate
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Comment</th>
                                    <th>Rating</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="pendingCommentsBody"></tbody>
                        </table>
                    </div>
                </div>
            `;
        }
        
        function loadDashboardData() {
            const contacts = JSON.parse(localStorage.getItem('contacts')) || [];
            const requests = JSON.parse(localStorage.getItem('requests')) || [];
            const comments = JSON.parse(localStorage.getItem('comments')) || [];
            
            // Stats
            const dashboardStats = document.getElementById('dashboardStats');
            if (dashboardStats) {
                dashboardStats.innerHTML = `
                    <div class="stat-card">
                        <div class="stat-icon"><span class="material-symbols-outlined">mail</span></div>
                        <div class="stat-content">
                            <h3>${contacts.length}</h3>
                            <p>Total Contacts</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><span class="material-symbols-outlined">info</span></div>
                        <div class="stat-content">
                            <h3>${requests.length}</h3>
                            <p>Info Requests</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><span class="material-symbols-outlined">comment</span></div>
                        <div class="stat-content">
                            <h3>${comments.filter(c => !c.approved).length}</h3>
                            <p>Pending Comments</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><span class="material-symbols-outlined">folder</span></div>
                        <div class="stat-content">
                            <h3>6</h3>
                            <p>Projects</p>
                        </div>
                    </div>
                `;
            }
            
            // Recent contacts
            const recentContactsBody = document.getElementById('recentContactsBody');
            if (recentContactsBody) {
                const recentContacts = contacts.slice(-5).reverse();
                recentContactsBody.innerHTML = recentContacts.map(c => `
                    <tr>
                        <td>${c.name || ''}</td>
                        <td>${c.email || ''}</td>
                        <td>${c.subject || ''}</td>
                        <td>${c.date || ''}</td>
                        <td><span class="status-badge status-${c.status || 'pending'}">${c.status || 'pending'}</span></td>
                    </tr>
                `).join('');
            }
            
            // Recent requests
            const recentRequestsBody = document.getElementById('recentRequestsBody');
            if (recentRequestsBody) {
                const recentRequests = requests.slice(-5).reverse();
                recentRequestsBody.innerHTML = recentRequests.map(r => `
                    <tr>
                        <td>${r.name || ''}</td>
                        <td>${r.company || ''}</td>
                        <td>${r.requestType || ''}</td>
                        <td>${r.date || ''}</td>
                        <td><span class="status-badge status-${r.status || 'pending'}">${r.status || 'pending'}</span></td>
                    </tr>
                `).join('');
            }
            
            // Pending comments
            const pendingCommentsBody = document.getElementById('pendingCommentsBody');
            if (pendingCommentsBody) {
                const pendingComments = comments.filter(c => !c.approved).slice(0, 5);
                pendingCommentsBody.innerHTML = pendingComments.map(c => `
                    <tr>
                        <td>${c.name || ''}</td>
                        <td>${(c.comment || '').substring(0, 50)}...</td>
                        <td>${''.repeat(c.rating || 0)}</td>
                        <td>${c.date || ''}</td>
                        <td>
                            <button class="table-btn" onclick="approveComment(${c.id})" style="color:var(--success);" title="Approve">
                                <span class="material-symbols-outlined">check</span>
                            </button>
                            <button class="table-btn" onclick="rejectComment(${c.id})" style="color:var(--danger);" title="Reject">
                                <span class="material-symbols-outlined">close</span>
                            </button>
                        </td>
                    </tr>
                `).join('');
            }
        }
        
        // ==================== CONTACTS ====================
        function getContactsHTML() {
            return `
                <div class="page-header">
                    <div>
                        <h1>Contact Requests</h1>
                        <p>Manage all contact form submissions</p>
                    </div>
                    <div class="header-actions">
                        <button class="action-btn" onclick="exportContacts()">
                            <span class="material-symbols-outlined">download</span>
                            Export
                        </button>
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Company</th>
                                    <th>Subject</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="allContactsBody"></tbody>
                        </table>
                    </div>
                </div>
            `;
        }
        
        function loadContactsData() {
            const contacts = JSON.parse(localStorage.getItem('contacts')) || [];
            const tbody = document.getElementById('allContactsBody');
            if (!tbody) return;
            
            tbody.innerHTML = contacts.map(c => `
                <tr>
                    <td>${c.id}</td>
                    <td>${c.name || ''}</td>
                    <td>${c.email || ''}</td>
                    <td>${c.company || ''}</td>
                    <td>${c.subject || ''}</td>
                    <td>${c.date || ''}</td>
                    <td><span class="status-badge status-${c.status || 'pending'}">${c.status || 'pending'}</span></td>
                    <td>
                        <div class="table-actions">
                            <button class="table-btn view" onclick="viewContact(${c.id})" title="View">
                                <span class="material-symbols-outlined">visibility</span>
                            </button>
                            <button class="table-btn edit" onclick="editContact(${c.id})" title="Edit">
                                <span class="material-symbols-outlined">edit</span>
                            </button>
                            <button class="table-btn reply" onclick="replyToContact(${c.id})" title="Reply">
                                <span class="material-symbols-outlined">reply</span>
                            </button>
                            <button class="table-btn delete" onclick="deleteContact(${c.id})" title="Delete">
                                <span class="material-symbols-outlined">delete</span>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }
        
        function viewContact(id) {
            const contacts = JSON.parse(localStorage.getItem('contacts')) || [];
            const contact = contacts.find(c => c.id === id);
            
            if (!contact) return;
            
            const modal = document.getElementById('viewModal');
            const modalTitle = document.getElementById('viewModalTitle');
            const modalBody = document.getElementById('viewModalBody');
            
            if (modal && modalTitle && modalBody) {
                modalTitle.textContent = 'Contact Details';
                
                const repliesHTML = (contact.replies || []).map(reply => `
                    <div class="reply-item">
                        <div class="reply-header">
                            <span class="reply-author">Admin</span>
                            <span class="reply-date">${reply.date}</span>
                        </div>
                        <div class="reply-content">${reply.message}</div>
                    </div>
                `).join('');
                
                modalBody.innerHTML = `
                    <div class="detail-view">
                        <div class="detail-item">
                            <div class="detail-label">Name</div>
                            <div class="detail-value">${contact.name || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Email</div>
                            <div class="detail-value">${contact.email || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Company</div>
                            <div class="detail-value">${contact.company || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Subject</div>
                            <div class="detail-value">${contact.subject || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Date</div>
                            <div class="detail-value">${contact.date || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Status</div>
                            <div class="detail-value">
                                <span class="status-badge status-${contact.status || 'pending'}">${contact.status || 'pending'}</span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Message</div>
                            <div class="message-box">${contact.message || ''}</div>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="action-btn success" onclick="updateContactStatus(${id}, 'approved')">
                                <span class="material-symbols-outlined">check_circle</span> Approve
                            </button>
                            <button class="action-btn" onclick="updateContactStatus(${id}, 'replied')">
                                <span class="material-symbols-outlined">mark_email_read</span> Mark as Replied
                            </button>
                            <button class="action-btn" onclick="replyToContact(${id})">
                                <span class="material-symbols-outlined">reply</span> Reply
                            </button>
                        </div>
                        
                        ${repliesHTML ? `
                            <div class="reply-section">
                                <h4>Reply History</h4>
                                <div class="reply-history">
                                    ${repliesHTML}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;
                
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        function editContact(id) {
            const contacts = JSON.parse(localStorage.getItem('contacts')) || [];
            const contact = contacts.find(c => c.id === id);
            
            if (!contact) return;
            
            const modal = document.getElementById('editModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            if (modal && modalTitle && modalBody) {
                modalTitle.textContent = 'Edit Contact';
                modalBody.innerHTML = `
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" class="form-control" id="editContactName" value="${contact.name || ''}">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" class="form-control" id="editContactEmail" value="${contact.email || ''}">
                    </div>
                    <div class="form-group">
                        <label>Company</label>
                        <input type="text" class="form-control" id="editContactCompany" value="${contact.company || ''}">
                    </div>
                    <div class="form-group">
                        <label>Subject</label>
                        <input type="text" class="form-control" id="editContactSubject" value="${contact.subject || ''}">
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select class="form-control" id="editContactStatus">
                            <option value="pending" ${contact.status === 'pending' ? 'selected' : ''}>Pending</option>
                            <option value="approved" ${contact.status === 'approved' ? 'selected' : ''}>Approved</option>
                            <option value="replied" ${contact.status === 'replied' ? 'selected' : ''}>Replied</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Message</label>
                        <textarea class="form-control" id="editContactMessage" rows="4">${contact.message || ''}</textarea>
                    </div>
                `;
                
                currentEditType = 'contact';
                currentViewId = id;
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        function replyToContact(id) {
            const contacts = JSON.parse(localStorage.getItem('contacts')) || [];
            const contact = contacts.find(c => c.id === id);
            
            if (!contact) return;
            
            const modal = document.getElementById('editModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            if (modal && modalTitle && modalBody) {
                modalTitle.textContent = 'Reply to Contact';
                modalBody.innerHTML = `
                    <div style="margin-bottom: 20px; padding: 15px; background: var(--light); border-radius: var(--radius-sm);">
                        <strong>Original Message:</strong>
                        <p style="margin-top: 10px;">${contact.message}</p>
                    </div>
                    <div class="form-group">
                        <label>Your Reply</label>
                        <textarea class="form-control" id="replyMessage" rows="6" placeholder="Type your reply here..."></textarea>
                    </div>
                `;
                
                currentEditType = 'replyContact';
                currentViewId = id;
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        function updateContactStatus(id, status) {
            let contacts = JSON.parse(localStorage.getItem('contacts')) || [];
            const index = contacts.findIndex(c => c.id === id);
            
            if (index !== -1) {
                contacts[index].status = status;
                localStorage.setItem('contacts', JSON.stringify(contacts));
                closeViewModal();
                loadContactsData();
                showToast(`Contact marked as ${status}`, 'success');
            }
        }
        
        function deleteContact(id) {
            if (confirm('Are you sure you want to delete this contact?')) {
                let contacts = JSON.parse(localStorage.getItem('contacts')) || [];
                contacts = contacts.filter(c => c.id !== id);
                localStorage.setItem('contacts', JSON.stringify(contacts));
                loadContactsData();
                showToast('Contact deleted successfully', 'success');
            }
        }
        
        // ==================== REQUESTS ====================
        function getRequestsHTML() {
            return `
                <div class="page-header">
                    <div>
                        <h1>Information Requests</h1>
                        <p>Manage CV and information requests</p>
                    </div>
                    <div class="header-actions">
                        <button class="action-btn" onclick="exportRequests()">
                            <span class="material-symbols-outlined">download</span>
                            Export
                        </button>
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Email</th>
                                    <th>Company</th>
                                    <th>Position</th>
                                    <th>Request Type</th>
                                    <th>Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="allRequestsBody"></tbody>
                        </table>
                    </div>
                </div>
            `;
        }
        
        function loadRequestsData() {
            const requests = JSON.parse(localStorage.getItem('requests')) || [];
            const tbody = document.getElementById('allRequestsBody');
            if (!tbody) return;
            
            tbody.innerHTML = requests.map(r => `
                <tr>
                    <td>${r.id}</td>
                    <td>${r.name || ''}</td>
                    <td>${r.email || ''}</td>
                    <td>${r.company || ''}</td>
                    <td>${r.position || ''}</td>
                    <td><span class="status-badge">${r.requestType || ''}</span></td>
                    <td>${r.date || ''}</td>
                    <td><span class="status-badge status-${r.status || 'pending'}">${r.status || 'pending'}</span></td>
                    <td>
                        <div class="table-actions">
                            <button class="table-btn view" onclick="viewRequest(${r.id})" title="View">
                                <span class="material-symbols-outlined">visibility</span>
                            </button>
                            <button class="table-btn edit" onclick="editRequest(${r.id})" title="Edit">
                                <span class="material-symbols-outlined">edit</span>
                            </button>
                            <button class="table-btn reply" onclick="replyToRequest(${r.id})" title="Reply">
                                <span class="material-symbols-outlined">reply</span>
                            </button>
                            <button class="table-btn delete" onclick="deleteRequest(${r.id})" title="Delete">
                                <span class="material-symbols-outlined">delete</span>
                            </button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }
        
        function viewRequest(id) {
            const requests = JSON.parse(localStorage.getItem('requests')) || [];
            const request = requests.find(r => r.id === id);
            
            if (!request) return;
            
            const modal = document.getElementById('viewModal');
            const modalTitle = document.getElementById('viewModalTitle');
            const modalBody = document.getElementById('viewModalBody');
            
            if (modal && modalTitle && modalBody) {
                modalTitle.textContent = 'Request Details';
                
                const repliesHTML = (request.replies || []).map(reply => `
                    <div class="reply-item">
                        <div class="reply-header">
                            <span class="reply-author">Admin</span>
                            <span class="reply-date">${reply.date}</span>
                        </div>
                        <div class="reply-content">${reply.message}</div>
                    </div>
                `).join('');
                
                modalBody.innerHTML = `
                    <div class="detail-view">
                        <div class="detail-item">
                            <div class="detail-label">Name</div>
                            <div class="detail-value">${request.name || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Email</div>
                            <div class="detail-value">${request.email || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Company</div>
                            <div class="detail-value">${request.company || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Position</div>
                            <div class="detail-value">${request.position || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Request Type</div>
                            <div class="detail-value">${request.requestType || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Date</div>
                            <div class="detail-value">${request.date || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Status</div>
                            <div class="detail-value">
                                <span class="status-badge status-${request.status || 'pending'}">${request.status || 'pending'}</span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Details</div>
                            <div class="message-box">${request.details || ''}</div>
                        </div>
                        
                        <div class="action-buttons">
                            <button class="action-btn success" onclick="updateRequestStatus(${id}, 'approved')">
                                <span class="material-symbols-outlined">check_circle</span> Approve
                            </button>
                            <button class="action-btn" onclick="updateRequestStatus(${id}, 'replied')">
                                <span class="material-symbols-outlined">mark_email_read</span> Mark as Replied
                            </button>
                            <button class="action-btn" onclick="replyToRequest(${id})">
                                <span class="material-symbols-outlined">reply</span> Reply
                            </button>
                        </div>
                        
                        ${repliesHTML ? `
                            <div class="reply-section">
                                <h4>Reply History</h4>
                                <div class="reply-history">
                                    ${repliesHTML}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;
                
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        function editRequest(id) {
            const requests = JSON.parse(localStorage.getItem('requests')) || [];
            const request = requests.find(r => r.id === id);
            
            if (!request) return;
            
            const modal = document.getElementById('editModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            if (modal && modalTitle && modalBody) {
                modalTitle.textContent = 'Edit Request';
                modalBody.innerHTML = `
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" class="form-control" id="editRequestName" value="${request.name || ''}">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" class="form-control" id="editRequestEmail" value="${request.email || ''}">
                    </div>
                    <div class="form-group">
                        <label>Company</label>
                        <input type="text" class="form-control" id="editRequestCompany" value="${request.company || ''}">
                    </div>
                    <div class="form-group">
                        <label>Position</label>
                        <input type="text" class="form-control" id="editRequestPosition" value="${request.position || ''}">
                    </div>
                    <div class="form-group">
                        <label>Request Type</label>
                        <select class="form-control" id="editRequestType">
                            <option value="cv" ${request.requestType === 'cv' ? 'selected' : ''}>CV</option>
                            <option value="consultation" ${request.requestType === 'consultation' ? 'selected' : ''}>Consultation</option>
                            <option value="references" ${request.requestType === 'references' ? 'selected' : ''}>References</option>
                            <option value="other" ${request.requestType === 'other' ? 'selected' : ''}>Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select class="form-control" id="editRequestStatus">
                            <option value="pending" ${request.status === 'pending' ? 'selected' : ''}>Pending</option>
                            <option value="approved" ${request.status === 'approved' ? 'selected' : ''}>Approved</option>
                            <option value="replied" ${request.status === 'replied' ? 'selected' : ''}>Replied</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Details</label>
                        <textarea class="form-control" id="editRequestDetails" rows="4">${request.details || ''}</textarea>
                    </div>
                `;
                
                currentEditType = 'request';
                currentViewId = id;
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        function replyToRequest(id) {
            const requests = JSON.parse(localStorage.getItem('requests')) || [];
            const request = requests.find(r => r.id === id);
            
            if (!request) return;
            
            const modal = document.getElementById('editModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            if (modal && modalTitle && modalBody) {
                modalTitle.textContent = 'Reply to Request';
                modalBody.innerHTML = `
                    <div style="margin-bottom: 20px; padding: 15px; background: var(--light); border-radius: var(--radius-sm);">
                        <strong>Request Details:</strong>
                        <p style="margin-top: 10px;">${request.details}</p>
                    </div>
                    <div class="form-group">
                        <label>Your Reply</label>
                        <textarea class="form-control" id="replyMessage" rows="6" placeholder="Type your reply here..."></textarea>
                    </div>
                `;
                
                currentEditType = 'replyRequest';
                currentViewId = id;
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        function updateRequestStatus(id, status) {
            let requests = JSON.parse(localStorage.getItem('requests')) || [];
            const index = requests.findIndex(r => r.id === id);
            
            if (index !== -1) {
                requests[index].status = status;
                localStorage.setItem('requests', JSON.stringify(requests));
                closeViewModal();
                loadRequestsData();
                showToast(`Request marked as ${status}`, 'success');
            }
        }
        
        function deleteRequest(id) {
            if (confirm('Are you sure you want to delete this request?')) {
                let requests = JSON.parse(localStorage.getItem('requests')) || [];
                requests = requests.filter(r => r.id !== id);
                localStorage.setItem('requests', JSON.stringify(requests));
                loadRequestsData();
                showToast('Request deleted successfully', 'success');
            }
        }
        
        // ==================== COMMENTS ====================
        function getCommentsHTML() {
            return `
                <div class="page-header">
                    <div>
                        <h1>Comments</h1>
                        <p>Moderate user comments</p>
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h2>Pending Moderation</h2>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Project</th>
                                    <th>Name</th>
                                    <th>Comment</th>
                                    <th>Rating</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="pendingCommentsTable"></tbody>
                        </table>
                    </div>
                </div>
                
                <div class="content-section">
                    <div class="section-header">
                        <h2>Approved Comments</h2>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Project</th>
                                    <th>Name</th>
                                    <th>Comment</th>
                                    <th>Rating</th>
                                    <th>Date</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="approvedCommentsTable"></tbody>
                        </table>
                    </div>
                </div>
            `;
        }
        
        function loadCommentsData() {
            const comments = JSON.parse(localStorage.getItem('comments')) || [];
            
            const pendingTable = document.getElementById('pendingCommentsTable');
            if (pendingTable) {
                const pending = comments.filter(c => !c.approved);
                pendingTable.innerHTML = pending.map(c => `
                    <tr>
                        <td>${c.id}</td>
                        <td>${c.projectId || ''}</td>
                        <td>${c.name || ''}</td>
                        <td>${(c.comment || '').substring(0, 50)}...</td>
                        <td>${''.repeat(c.rating || 0)}</td>
                        <td>${c.date || ''}</td>
                        <td>
                            <div class="table-actions">
                                <button class="table-btn" onclick="viewComment(${c.id})" title="View">
                                    <span class="material-symbols-outlined">visibility</span>
                                </button>
                                <button class="table-btn" onclick="approveComment(${c.id})" style="color:var(--success);" title="Approve">
                                    <span class="material-symbols-outlined">check</span>
                                </button>
                                <button class="table-btn" onclick="rejectComment(${c.id})" style="color:var(--danger);" title="Reject">
                                    <span class="material-symbols-outlined">close</span>
                                </button>
                            </div>
                        </td>
                    </tr>
                `).join('');
            }
            
            const approvedTable = document.getElementById('approvedCommentsTable');
            if (approvedTable) {
                const approved = comments.filter(c => c.approved);
                approvedTable.innerHTML = approved.map(c => `
                    <tr>
                        <td>${c.id}</td>
                        <td>${c.projectId || ''}</td>
                        <td>${c.name || ''}</td>
                        <td>${(c.comment || '').substring(0, 50)}...</td>
                        <td>${''.repeat(c.rating || 0)}</td>
                        <td>${c.date || ''}</td>
                        <td>
                            <div class="table-actions">
                                <button class="table-btn" onclick="viewComment(${c.id})" title="View">
                                    <span class="material-symbols-outlined">visibility</span>
                                </button>
                                <button class="table-btn" onclick="replyToComment(${c.id})" title="Reply">
                                    <span class="material-symbols-outlined">reply</span>
                                </button>
                                <button class="table-btn delete" onclick="deleteComment(${c.id})" style="color:var(--danger);" title="Delete">
                                    <span class="material-symbols-outlined">delete</span>
                                </button>
                            </div>
                        </td>
                    </tr>
                `).join('');
            }
        }
        
        function viewComment(id) {
            const comments = JSON.parse(localStorage.getItem('comments')) || [];
            const comment = comments.find(c => c.id === id);
            
            if (!comment) return;
            
            const modal = document.getElementById('viewModal');
            const modalTitle = document.getElementById('viewModalTitle');
            const modalBody = document.getElementById('viewModalBody');
            
            if (modal && modalTitle && modalBody) {
                modalTitle.textContent = 'Comment Details';
                
                const repliesHTML = (comment.replies || []).map(reply => `
                    <div class="reply-item">
                        <div class="reply-header">
                            <span class="reply-author">Admin</span>
                            <span class="reply-date">${reply.date}</span>
                        </div>
                        <div class="reply-content">${reply.comment}</div>
                    </div>
                `).join('');
                
                modalBody.innerHTML = `
                    <div class="detail-view">
                        <div class="detail-item">
                            <div class="detail-label">Project</div>
                            <div class="detail-value">${comment.projectId || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Name</div>
                            <div class="detail-value">${comment.name || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Email</div>
                            <div class="detail-value">${comment.email || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Rating</div>
                            <div class="detail-value">${''.repeat(comment.rating || 0)}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Date</div>
                            <div class="detail-value">${comment.date || ''}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Status</div>
                            <div class="detail-value">
                                <span class="status-badge status-${comment.approved ? 'approved' : 'pending'}">${comment.approved ? 'Approved' : 'Pending'}</span>
                            </div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Comment</div>
                            <div class="message-box">${comment.comment || ''}</div>
                        </div>
                        
                        <div class="action-buttons">
                            ${!comment.approved ? `
                                <button class="action-btn success" onclick="approveComment(${id})">
                                    <span class="material-symbols-outlined">check_circle</span> Approve
                                </button>
                            ` : ''}
                            <button class="action-btn" onclick="replyToComment(${id})">
                                <span class="material-symbols-outlined">reply</span> Reply
                            </button>
                        </div>
                        
                        ${repliesHTML ? `
                            <div class="reply-section">
                                <h4>Replies</h4>
                                <div class="reply-history">
                                    ${repliesHTML}
                                </div>
                            </div>
                        ` : ''}
                    </div>
                `;
                
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        function replyToComment(id) {
            const comments = JSON.parse(localStorage.getItem('comments')) || [];
            const comment = comments.find(c => c.id === id);
            
            if (!comment) return;
            
            const modal = document.getElementById('editModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            if (modal && modalTitle && modalBody) {
                modalTitle.textContent = 'Reply to Comment';
                modalBody.innerHTML = `
                    <div style="margin-bottom: 20px; padding: 15px; background: var(--light); border-radius: var(--radius-sm);">
                        <strong>Original Comment:</strong>
                        <p style="margin-top: 10px;">${comment.comment}</p>
                    </div>
                    <div class="form-group">
                        <label>Your Reply</label>
                        <textarea class="form-control" id="replyMessage" rows="6" placeholder="Type your reply here..."></textarea>
                    </div>
                `;
                
                currentEditType = 'replyComment';
                currentViewId = id;
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        function approveComment(id) {
            let comments = JSON.parse(localStorage.getItem('comments')) || [];
            comments = comments.map(c => c.id === id ? {...c, approved: true} : c);
            localStorage.setItem('comments', JSON.stringify(comments));
            closeViewModal();
            loadCommentsData();
            loadDashboardData();
            showToast('Comment approved', 'success');
        }
        
        function rejectComment(id) {
            if (confirm('Reject this comment?')) {
                let comments = JSON.parse(localStorage.getItem('comments')) || [];
                comments = comments.filter(c => c.id !== id);
                localStorage.setItem('comments', JSON.stringify(comments));
                loadCommentsData();
                loadDashboardData();
                showToast('Comment rejected and removed', 'success');
            }
        }
        
        function deleteComment(id) {
            if (confirm('Delete this comment?')) {
                let comments = JSON.parse(localStorage.getItem('comments')) || [];
                comments = comments.filter(c => c.id !== id);
                localStorage.setItem('comments', JSON.stringify(comments));
                loadCommentsData();
                showToast('Comment deleted', 'success');
            }
        }
        
        // ==================== SITE CONTENT ====================
        function getSiteContentHTML() {
            return `
                <div class="page-header">
                    <div>
                        <h1>Site Content</h1>
                        <p>Edit all content displayed on your website</p>
                    </div>
                    <div class="header-actions">
                        <button class="action-btn primary" onclick="exportSiteData()">
                            <span class="material-symbols-outlined">download</span>
                            Export Data
                        </button>
                        <button class="action-btn" onclick="importSiteData()">
                            <span class="material-symbols-outlined">upload</span>
                            Import Data
                        </button>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Personal Information</h3>
                    <div class="settings-grid" id="personalInfoGrid"></div>
                    <button class="save-btn" onclick="editPersonalInfo()" style="margin-top:20px;">
                        <span class="material-symbols-outlined">edit</span> Edit Personal Info
                    </button>
                </div>
                
                <div class="settings-section">
                    <h3>Work Experience</h3>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Company</th>
                                    <th>Title</th>
                                    <th>Period</th>
                                    <th>Location</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="workTableBody"></tbody>
                        </table>
                    </div>
                    <button class="save-btn" onclick="addWorkItem()" style="margin-top:20px;">
                        <span class="material-symbols-outlined">add</span> Add Work Experience
                    </button>
                </div>
                
                <div class="settings-section">
                    <h3>Skills</h3>
                    <div id="skillsContainer"></div>
                    <button class="save-btn" onclick="addSkillCategory()" style="margin-top:20px;">
                        <span class="material-symbols-outlined">add</span> Add Skill Category
                    </button>
                </div>
                
                <div class="settings-section">
                    <h3>Certifications</h3>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Issuer</th>
                                    <th>Date</th>
                                    <th>Credential ID</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="certTableBody"></tbody>
                        </table>
                    </div>
                    <button class="save-btn" onclick="addCertification()" style="margin-top:20px;">
                        <span class="material-symbols-outlined">add</span> Add Certification
                    </button>
                </div>
                
                <div class="settings-section">
                    <h3>Education</h3>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Degree</th>
                                    <th>Institution</th>
                                    <th>Period</th>
                                    <th>Location</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="eduTableBody"></tbody>
                        </table>
                    </div>
                    <button class="save-btn" onclick="addEducation()" style="margin-top:20px;">
                        <span class="material-symbols-outlined">add</span> Add Education
                    </button>
                </div>
                
                <div class="settings-section">
                    <h3>Projects</h3>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Title</th>
                                    <th>Category</th>
                                    <th>Featured</th>
                                    <th>Tags</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="projectsTableBody"></tbody>
                        </table>
                    </div>
                    <button class="save-btn" onclick="addProject()" style="margin-top:20px;">
                        <span class="material-symbols-outlined">add</span> Add Project
                    </button>
                </div>
            `;
        }
        
        function loadSiteContentData() {
            const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
            
            // Personal Info
            const personalGrid = document.getElementById('personalInfoGrid');
            if (personalGrid && siteData.personal) {
                personalGrid.innerHTML = `
                    <div class="setting-item">
                        <div class="setting-label">Full Name</div>
                        <div class="setting-value">${siteData.personal.name || ''}</div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">Title</div>
                        <div class="setting-value">${siteData.personal.title || ''}</div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">Email</div>
                        <div class="setting-value">${siteData.personal.email || ''}</div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">Phone</div>
                        <div class="setting-value">${siteData.personal.phone || ''}</div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">Location</div>
                        <div class="setting-value">${siteData.personal.location || ''}</div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">LinkedIn</div>
                        <div class="setting-value">${siteData.personal.social?.linkedin || ''}</div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">Twitter</div>
                        <div class="setting-value">${siteData.personal.social?.twitter || ''}</div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">GitHub</div>
                        <div class="setting-value">${siteData.personal.social?.github || ''}</div>
                    </div>
                    <div class="setting-item" style="grid-column: span 3;">
                        <div class="setting-label">About</div>
                        <div class="setting-value">${siteData.personal.about || ''}</div>
                    </div>
                `;
            }
            
            // Work Experience
            const workTable = document.getElementById('workTableBody');
            if (workTable && siteData.work) {
                workTable.innerHTML = siteData.work.map((w, index) => `
                    <tr>
                        <td>${w.company || ''}</td>
                        <td>${w.title || ''}</td>
                        <td>${w.period || ''}</td>
                        <td>${w.location || ''}</td>
                        <td>
                            <button class="table-btn edit" onclick="editWorkItem(${index})">
                                <span class="material-symbols-outlined">edit</span>
                            </button>
                            <button class="table-btn delete" onclick="deleteWorkItem(${index})">
                                <span class="material-symbols-outlined">delete</span>
                            </button>
                        </td>
                    </tr>
                `).join('');
            }
            
            // Skills
            const skillsContainer = document.getElementById('skillsContainer');
            if (skillsContainer && siteData.skills) {
                skillsContainer.innerHTML = siteData.skills.map((skillCat, catIndex) => `
                    <div style="margin-bottom: 20px; padding: 15px; background: var(--white); border-radius: var(--radius-sm);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <h4 style="color: var(--primary);">${skillCat.category}</h4>
                            <div>
                                <button class="table-btn edit" onclick="editSkillCategory(${catIndex})">
                                    <span class="material-symbols-outlined">edit</span>
                                </button>
                                <button class="table-btn delete" onclick="deleteSkillCategory(${catIndex})">
                                    <span class="material-symbols-outlined">delete</span>
                                </button>
                            </div>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px;">
                            ${skillCat.skills.map((skill, skillIndex) => `
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: 5px 10px; background: var(--light); border-radius: var(--radius-sm);">
                                    <span>${skill.name}</span>
                                    <span style="font-weight: 600; color: var(--primary);">${skill.level}%</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `).join('');
            }
            
            // Certifications
            const certTable = document.getElementById('certTableBody');
            if (certTable && siteData.certificates) {
                certTable.innerHTML = siteData.certificates.map((c, index) => `
                    <tr>
                        <td>${c.name || ''}</td>
                        <td>${c.issuer || ''}</td>
                        <td>${c.date || ''}</td>
                        <td>${c.credentialId || ''}</td>
                        <td>
                            <button class="table-btn edit" onclick="editCertification(${index})">
                                <span class="material-symbols-outlined">edit</span>
                            </button>
                            <button class="table-btn delete" onclick="deleteCertification(${index})">
                                <span class="material-symbols-outlined">delete</span>
                            </button>
                        </td>
                    </tr>
                `).join('');
            }
            
            // Education
            const eduTable = document.getElementById('eduTableBody');
            if (eduTable && siteData.education) {
                eduTable.innerHTML = siteData.education.map((e, index) => `
                    <tr>
                        <td>${e.degree || ''}</td>
                        <td>${e.institution || ''}</td>
                        <td>${e.period || ''}</td>
                        <td>${e.location || ''}</td>
                        <td>
                            <button class="table-btn edit" onclick="editEducation(${index})">
                                <span class="material-symbols-outlined">edit</span>
                            </button>
                            <button class="table-btn delete" onclick="deleteEducation(${index})">
                                <span class="material-symbols-outlined">delete</span>
                            </button>
                        </td>
                    </tr>
                `).join('');
            }
            
            // Projects
            const projectsTable = document.getElementById('projectsTableBody');
            if (projectsTable && siteData.projects) {
                projectsTable.innerHTML = siteData.projects.map((p, index) => `
                    <tr>
                        <td>${p.title || ''}</td>
                        <td>${p.category || ''}</td>
                        <td>${p.featured ? '' : ''}</td>
                        <td>${(p.tags || []).join(', ')}</td>
                        <td>
                            <button class="table-btn edit" onclick="editProject(${index})">
                                <span class="material-symbols-outlined">edit</span>
                            </button>
                            <button class="table-btn delete" onclick="deleteProject(${index})">
                                <span class="material-symbols-outlined">delete</span>
                            </button>
                        </td>
                    </tr>
                `).join('');
            }
        }
        
        function editPersonalInfo() {
            const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
            const personal = siteData.personal || {};
            
            openModal('Edit Personal Information', `
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" class="form-control" id="editName" value="${personal.name || ''}">
                </div>
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" class="form-control" id="editTitle" value="${personal.title || ''}">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-control" id="editEmail" value="${personal.email || ''}">
                </div>
                <div class="form-group">
                    <label>Phone</label>
                    <input type="text" class="form-control" id="editPhone" value="${personal.phone || ''}">
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <input type="text" class="form-control" id="editLocation" value="${personal.location || ''}">
                </div>
                <div class="form-group">
                    <label>LinkedIn URL</label>
                    <input type="text" class="form-control" id="editLinkedin" value="${personal.social?.linkedin || ''}">
                </div>
                <div class="form-group">
                    <label>Twitter URL</label>
                    <input type="text" class="form-control" id="editTwitter" value="${personal.social?.twitter || ''}">
                </div>
                <div class="form-group">
                    <label>GitHub URL</label>
                    <input type="text" class="form-control" id="editGithub" value="${personal.social?.github || ''}">
                </div>
                <div class="form-group">
                    <label>About</label>
                    <textarea class="form-control" id="editAbout" rows="4">${personal.about || ''}</textarea>
                </div>
            `);
            currentEditType = 'personal';
        }
        
        function editWorkItem(index) {
            const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
            const item = (siteData.work || [])[index] || {};
            
            openModal('Edit Work Experience', `
                <div class="form-group">
                    <label>Company</label>
                    <input type="text" class="form-control" id="editWorkCompany" value="${item.company || ''}">
                </div>
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" class="form-control" id="editWorkTitle" value="${item.title || ''}">
                </div>
                <div class="form-group">
                    <label>Period</label>
                    <input type="text" class="form-control" id="editWorkPeriod" value="${item.period || ''}" placeholder="e.g., Jan 2024 - Present">
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <input type="text" class="form-control" id="editWorkLocation" value="${item.location || ''}">
                </div>
                <div class="form-group">
                    <label>Summary</label>
                    <textarea class="form-control" id="editWorkSummary" rows="2">${item.summary || ''}</textarea>
                </div>
                <div class="form-group">
                    <label>Highlights (one per line)</label>
                    <textarea class="form-control" id="editWorkHighlights" rows="4">${(item.highlights || []).join('\n')}</textarea>
                </div>
            `);
            currentEditType = 'work';
            currentEditIndex = index;
        }
        
        function editCertification(index) {
            const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
            const item = (siteData.certificates || [])[index] || {};
            
            openModal('Edit Certification', `
                <div class="form-group">
                    <label>Certificate Name</label>
                    <input type="text" class="form-control" id="editCertName" value="${item.name || ''}">
                </div>
                <div class="form-group">
                    <label>Issuer</label>
                    <input type="text" class="form-control" id="editCertIssuer" value="${item.issuer || ''}">
                </div>
                <div class="form-group">
                    <label>Date</label>
                    <input type="text" class="form-control" id="editCertDate" value="${item.date || ''}" placeholder="e.g., Jan 2025">
                </div>
                <div class="form-group">
                    <label>Credential ID</label>
                    <input type="text" class="form-control" id="editCertId" value="${item.credentialId || ''}">
                </div>
                <div class="form-group">
                    <label>Credential URL</label>
                    <input type="text" class="form-control" id="editCertLink" value="${item.link || ''}">
                </div>
            `);
            currentEditType = 'cert';
            currentEditIndex = index;
        }
        
        function editEducation(index) {
            const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
            const item = (siteData.education || [])[index] || {};
            
            openModal('Edit Education', `
                <div class="form-group">
                    <label>Degree</label>
                    <input type="text" class="form-control" id="editEduDegree" value="${item.degree || ''}">
                </div>
                <div class="form-group">
                    <label>Institution</label>
                    <input type="text" class="form-control" id="editEduInstitution" value="${item.institution || ''}">
                </div>
                <div class="form-group">
                    <label>Period</label>
                    <input type="text" class="form-control" id="editEduPeriod" value="${item.period || ''}" placeholder="e.g., 2020-2024">
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <input type="text" class="form-control" id="editEduLocation" value="${item.location || ''}">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea class="form-control" id="editEduDescription" rows="3">${item.description || ''}</textarea>
                </div>
            `);
            currentEditType = 'edu';
            currentEditIndex = index;
        }
        
        function editProject(index) {
            const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
            const item = (siteData.projects || [])[index] || {};
            
            openModal('Edit Project', `
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" class="form-control" id="editProjectTitle" value="${item.title || ''}">
                </div>
                <div class="form-group">
                    <label>Subtitle</label>
                    <input type="text" class="form-control" id="editProjectSubtitle" value="${item.subtitle || ''}">
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select class="form-control" id="editProjectCategory">
                        <option value="AI Product" ${item.category === 'AI Product' ? 'selected' : ''}>AI Product</option>
                        <option value="Fintech" ${item.category === 'Fintech' ? 'selected' : ''}>Fintech</option>
                        <option value="EdTech" ${item.category === 'EdTech' ? 'selected' : ''}>EdTech</option>
                        <option value="Marketplace" ${item.category === 'Marketplace' ? 'selected' : ''}>Marketplace</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Summary</label>
                    <textarea class="form-control" id="editProjectSummary" rows="2">${item.summary || ''}</textarea>
                </div>
                <div class="form-group">
                    <label>Tags (comma separated)</label>
                    <input type="text" class="form-control" id="editProjectTags" value="${(item.tags || []).join(', ')}">
                </div>
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="editProjectFeatured" ${item.featured ? 'checked' : ''}>
                    <label for="editProjectFeatured">Featured Project</label>
                </div>
            `);
            currentEditType = 'project';
            currentEditIndex = index;
        }
        
        function editSkillCategory(index) {
            const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
            const item = (siteData.skills || [])[index] || {};
            
            openModal('Edit Skill Category', `
                <div class="form-group">
                    <label>Category Name</label>
                    <input type="text" class="form-control" id="editSkillCategory" value="${item.category || ''}">
                </div>
                <div class="form-group">
                    <label>Skills (format: Skill Name|Level, one per line)</label>
                    <textarea class="form-control" id="editSkills" rows="6" placeholder="e.g., Product Vision|95&#10;Roadmap Development|90">${(item.skills || []).map(s => `${s.name}|${s.level}`).join('\n')}</textarea>
                </div>
            `);
            currentEditType = 'skillCategory';
            currentEditIndex = index;
        }
        
        function deleteSkillCategory(index) {
            if (confirm('Delete this skill category?')) {
                const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
                if (siteData.skills) {
                    siteData.skills.splice(index, 1);
                    localStorage.setItem('siteData', JSON.stringify(siteData));
                    loadSiteContentData();
                    showToast('Skill category deleted', 'success');
                }
            }
        }
        
        function deleteWorkItem(index) {
            if (confirm('Delete this work experience?')) {
                const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
                if (siteData.work) {
                    siteData.work.splice(index, 1);
                    localStorage.setItem('siteData', JSON.stringify(siteData));
                    loadSiteContentData();
                    showToast('Work experience deleted', 'success');
                }
            }
        }
        
        function deleteCertification(index) {
            if (confirm('Delete this certification?')) {
                const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
                if (siteData.certificates) {
                    siteData.certificates.splice(index, 1);
                    localStorage.setItem('siteData', JSON.stringify(siteData));
                    loadSiteContentData();
                    showToast('Certification deleted', 'success');
                }
            }
        }
        
        function deleteEducation(index) {
            if (confirm('Delete this education entry?')) {
                const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
                if (siteData.education) {
                    siteData.education.splice(index, 1);
                    localStorage.setItem('siteData', JSON.stringify(siteData));
                    loadSiteContentData();
                    showToast('Education entry deleted', 'success');
                }
            }
        }
        
        function deleteProject(index) {
            if (confirm('Delete this project?')) {
                const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
                if (siteData.projects) {
                    siteData.projects.splice(index, 1);
                    localStorage.setItem('siteData', JSON.stringify(siteData));
                    loadSiteContentData();
                    showToast('Project deleted', 'success');
                }
            }
        }
        
        function addSkillCategory() {
            openModal('Add Skill Category', `
                <div class="form-group">
                    <label>Category Name</label>
                    <input type="text" class="form-control" id="newSkillCategory" placeholder="e.g., Product Strategy">
                </div>
                <div class="form-group">
                    <label>Skills (format: Skill Name|Level, one per line)</label>
                    <textarea class="form-control" id="newSkills" rows="6" placeholder="e.g., Product Vision|95&#10;Roadmap Development|90"></textarea>
                </div>
            `);
            currentEditType = 'addSkillCategory';
        }
        
        function addWorkItem() {
            openModal('Add Work Experience', `
                <div class="form-group">
                    <label>Company</label>
                    <input type="text" class="form-control" id="newWorkCompany" placeholder="e.g., DTOTAL TECH CONSULT">
                </div>
                <div class="form-group">
                    <label>Title</label>
                    <input type="text" class="form-control" id="newWorkTitle" placeholder="e.g., Product Manager">
                </div>
                <div class="form-group">
                    <label>Period</label>
                    <input type="text" class="form-control" id="newWorkPeriod" placeholder="e.g., Jan 2024 - Present">
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <input type="text" class="form-control" id="newWorkLocation" placeholder="e.g., Lagos, Nigeria">
                </div>
                <div class="form-group">
                    <label>Summary</label>
                    <textarea class="form-control" id="newWorkSummary" rows="2" placeholder="Brief summary of role"></textarea>
                </div>
                <div class="form-group">
                    <label>Highlights (one per line)</label>
                    <textarea class="form-control" id="newWorkHighlights" rows="4" placeholder="Achievement 1&#10;Achievement 2"></textarea>
                </div>
            `);
            currentEditType = 'addWork';
        }
        
        function addCertification() {
            openModal('Add Certification', `
                <div class="form-group">
                    <label>Certificate Name</label>
                    <input type="text" class="form-control" id="newCertName" placeholder="e.g., Certified Product Manager">
                </div>
                <div class="form-group">
                    <label>Issuer</label>
                    <input type="text" class="form-control" id="newCertIssuer" placeholder="e.g., IBM">
                </div>
                <div class="form-group">
                    <label>Date</label>
                    <input type="text" class="form-control" id="newCertDate" placeholder="e.g., Jan 2025">
                </div>
                <div class="form-group">
                    <label>Credential ID</label>
                    <input type="text" class="form-control" id="newCertId" placeholder="e.g., IBM-12345">
                </div>
                <div class="form-group">
                    <label>Credential URL</label>
                    <input type="text" class="form-control" id="newCertLink" placeholder="https://...">
                </div>
            `);
            currentEditType = 'addCert';
        }
        
        function addEducation() {
            openModal('Add Education', `
                <div class="form-group">
                    <label>Degree</label>
                    <input type="text" class="form-control" id="newEduDegree" placeholder="e.g., MBA - Technology Business Management">
                </div>
                <div class="form-group">
                    <label>Institution</label>
                    <input type="text" class="form-control" id="newEduInstitution" placeholder="e.g., QUANTIC School of Business">
                </div>
                <div class="form-group">
                    <label>Period</label>
                    <input type="text" class="form-control" id="newEduPeriod" placeholder="e.g., 2023-2025">
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <input type="text" class="form-control" id="newEduLocation" placeholder="e.g., Lagos, Nigeria">
                </div>
                <div class="form-group">
                    <label>Description</label>
                    <textarea class="form-control" id="newEduDescription" rows="3" placeholder="Additional details..."></textarea>
                </div>
            `);
            currentEditType = 'addEdu';
        }
        
        function addProject() {
            openModal('Add Project', `
                <div class="form-group">
                    <label>Project Title</label>
                    <input type="text" class="form-control" id="newProjectTitle" placeholder="e.g., LiminAI">
                </div>
                <div class="form-group">
                    <label>Subtitle</label>
                    <input type="text" class="form-control" id="newProjectSubtitle" placeholder="e.g., AI-Powered Document Analysis">
                </div>
                <div class="form-group">
                    <label>Category</label>
                    <select class="form-control" id="newProjectCategory">
                        <option value="AI Product">AI Product</option>
                        <option value="Fintech">Fintech</option>
                        <option value="EdTech">EdTech</option>
                        <option value="Marketplace">Marketplace</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Summary</label>
                    <textarea class="form-control" id="newProjectSummary" rows="2" placeholder="Brief description..."></textarea>
                </div>
                <div class="form-group">
                    <label>Tags (comma separated)</label>
                    <input type="text" class="form-control" id="newProjectTags" placeholder="e.g., AI, Document Processing, Enterprise">
                </div>
                <div class="form-group checkbox-group">
                    <input type="checkbox" id="newProjectFeatured">
                    <label for="newProjectFeatured">Featured Project</label>
                </div>
            `);
            currentEditType = 'addProject';
        }
        
        function saveItem() {
            const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
            
            try {
                switch(currentEditType) {
                    case 'personal':
                        if (!siteData.personal) siteData.personal = {};
                        if (!siteData.personal.social) siteData.personal.social = {};
                        
                        siteData.personal.name = document.getElementById('editName')?.value || '';
                        siteData.personal.title = document.getElementById('editTitle')?.value || '';
                        siteData.personal.email = document.getElementById('editEmail')?.value || '';
                        siteData.personal.phone = document.getElementById('editPhone')?.value || '';
                        siteData.personal.location = document.getElementById('editLocation')?.value || '';
                        siteData.personal.social.linkedin = document.getElementById('editLinkedin')?.value || '';
                        siteData.personal.social.twitter = document.getElementById('editTwitter')?.value || '';
                        siteData.personal.social.github = document.getElementById('editGithub')?.value || '';
                        siteData.personal.about = document.getElementById('editAbout')?.value || '';
                        showToast('Personal information updated', 'success');
                        break;
                        
                    case 'work':
                        if (!siteData.work) siteData.work = [];
                        if (currentEditIndex >= 0) {
                            const highlights = (document.getElementById('editWorkHighlights')?.value || '')
                                .split('\n')
                                .filter(h => h.trim());
                            
                            siteData.work[currentEditIndex] = {
                                company: document.getElementById('editWorkCompany')?.value || '',
                                title: document.getElementById('editWorkTitle')?.value || '',
                                period: document.getElementById('editWorkPeriod')?.value || '',
                                location: document.getElementById('editWorkLocation')?.value || '',
                                summary: document.getElementById('editWorkSummary')?.value || '',
                                highlights: highlights
                            };
                            showToast('Work experience updated', 'success');
                        }
                        break;
                        
                    case 'cert':
                        if (!siteData.certificates) siteData.certificates = [];
                        if (currentEditIndex >= 0) {
                            siteData.certificates[currentEditIndex] = {
                                name: document.getElementById('editCertName')?.value || '',
                                issuer: document.getElementById('editCertIssuer')?.value || '',
                                date: document.getElementById('editCertDate')?.value || '',
                                credentialId: document.getElementById('editCertId')?.value || '',
                                link: document.getElementById('editCertLink')?.value || ''
                            };
                            showToast('Certification updated', 'success');
                        }
                        break;
                        
                    case 'edu':
                        if (!siteData.education) siteData.education = [];
                        if (currentEditIndex >= 0) {
                            siteData.education[currentEditIndex] = {
                                degree: document.getElementById('editEduDegree')?.value || '',
                                institution: document.getElementById('editEduInstitution')?.value || '',
                                period: document.getElementById('editEduPeriod')?.value || '',
                                location: document.getElementById('editEduLocation')?.value || '',
                                description: document.getElementById('editEduDescription')?.value || ''
                            };
                            showToast('Education updated', 'success');
                        }
                        break;
                        
                    case 'project':
                        if (!siteData.projects) siteData.projects = [];
                        if (currentEditIndex >= 0) {
                            const tags = (document.getElementById('editProjectTags')?.value || '')
                                .split(',')
                                .map(t => t.trim())
                                .filter(t => t);
                            
                            siteData.projects[currentEditIndex] = {
                                ...siteData.projects[currentEditIndex],
                                title: document.getElementById('editProjectTitle')?.value || '',
                                subtitle: document.getElementById('editProjectSubtitle')?.value || '',
                                category: document.getElementById('editProjectCategory')?.value || '',
                                summary: document.getElementById('editProjectSummary')?.value || '',
                                tags: tags,
                                featured: document.getElementById('editProjectFeatured')?.checked || false
                            };
                            showToast('Project updated', 'success');
                        }
                        break;
                        
                    case 'skillCategory':
                        if (!siteData.skills) siteData.skills = [];
                        if (currentEditIndex >= 0) {
                            const skillsText = document.getElementById('editSkills')?.value || '';
                            const skills = skillsText.split('\n')
                                .filter(line => line.trim())
                                .map(line => {
                                    const [name, level] = line.split('|');
                                    return {
                                        name: name?.trim() || '',
                                        level: parseInt(level) || 0
                                    };
                                });
                            
                            siteData.skills[currentEditIndex] = {
                                category: document.getElementById('editSkillCategory')?.value || '',
                                skills: skills
                            };
                            showToast('Skill category updated', 'success');
                        }
                        break;
                        
                    case 'addWork':
                        if (!siteData.work) siteData.work = [];
                        const workHighlights = (document.getElementById('newWorkHighlights')?.value || '')
                            .split('\n')
                            .filter(h => h.trim());
                        
                        siteData.work.push({
                            company: document.getElementById('newWorkCompany')?.value || '',
                            title: document.getElementById('newWorkTitle')?.value || '',
                            period: document.getElementById('newWorkPeriod')?.value || '',
                            location: document.getElementById('newWorkLocation')?.value || '',
                            summary: document.getElementById('newWorkSummary')?.value || '',
                            highlights: workHighlights
                        });
                        showToast('Work experience added', 'success');
                        break;
                        
                    case 'addCert':
                        if (!siteData.certificates) siteData.certificates = [];
                        siteData.certificates.push({
                            name: document.getElementById('newCertName')?.value || '',
                            issuer: document.getElementById('newCertIssuer')?.value || '',
                            date: document.getElementById('newCertDate')?.value || '',
                            credentialId: document.getElementById('newCertId')?.value || '',
                            link: document.getElementById('newCertLink')?.value || ''
                        });
                        showToast('Certification added', 'success');
                        break;
                        
                    case 'addEdu':
                        if (!siteData.education) siteData.education = [];
                        siteData.education.push({
                            degree: document.getElementById('newEduDegree')?.value || '',
                            institution: document.getElementById('newEduInstitution')?.value || '',
                            period: document.getElementById('newEduPeriod')?.value || '',
                            location: document.getElementById('newEduLocation')?.value || '',
                            description: document.getElementById('newEduDescription')?.value || ''
                        });
                        showToast('Education added', 'success');
                        break;
                        
                    case 'addProject':
                        if (!siteData.projects) siteData.projects = [];
                        const projectTags = (document.getElementById('newProjectTags')?.value || '')
                            .split(',')
                            .map(t => t.trim())
                            .filter(t => t);
                        
                        siteData.projects.push({
                            id: `project-${Date.now()}`,
                            title: document.getElementById('newProjectTitle')?.value || '',
                            subtitle: document.getElementById('newProjectSubtitle')?.value || '',
                            category: document.getElementById('newProjectCategory')?.value || '',
                            summary: document.getElementById('newProjectSummary')?.value || '',
                            tags: projectTags,
                            featured: document.getElementById('newProjectFeatured')?.checked || false,
                            image: '/assets/projects/default.jpg'
                        });
                        showToast('Project added', 'success');
                        break;
                        
                    case 'addSkillCategory':
                        if (!siteData.skills) siteData.skills = [];
                        const newSkillsText = document.getElementById('newSkills')?.value || '';
                        const newSkills = newSkillsText.split('\n')
                            .filter(line => line.trim())
                            .map(line => {
                                const [name, level] = line.split('|');
                                return {
                                    name: name?.trim() || '',
                                    level: parseInt(level) || 0
                                };
                            });
                        
                        siteData.skills.push({
                            category: document.getElementById('newSkillCategory')?.value || '',
                            skills: newSkills
                        });
                        showToast('Skill category added', 'success');
                        break;
                        
                    case 'contact':
                        if (currentViewId) {
                            let contacts = JSON.parse(localStorage.getItem('contacts')) || [];
                            const index = contacts.findIndex(c => c.id === currentViewId);
                            if (index !== -1) {
                                contacts[index] = {
                                    ...contacts[index],
                                    name: document.getElementById('editContactName')?.value || '',
                                    email: document.getElementById('editContactEmail')?.value || '',
                                    company: document.getElementById('editContactCompany')?.value || '',
                                    subject: document.getElementById('editContactSubject')?.value || '',
                                    message: document.getElementById('editContactMessage')?.value || '',
                                    status: document.getElementById('editContactStatus')?.value || 'pending'
                                };
                                localStorage.setItem('contacts', JSON.stringify(contacts));
                                showToast('Contact updated', 'success');
                            }
                        }
                        break;
                        
                    case 'request':
                        if (currentViewId) {
                            let requests = JSON.parse(localStorage.getItem('requests')) || [];
                            const index = requests.findIndex(r => r.id === currentViewId);
                            if (index !== -1) {
                                requests[index] = {
                                    ...requests[index],
                                    name: document.getElementById('editRequestName')?.value || '',
                                    email: document.getElementById('editRequestEmail')?.value || '',
                                    company: document.getElementById('editRequestCompany')?.value || '',
                                    position: document.getElementById('editRequestPosition')?.value || '',
                                    requestType: document.getElementById('editRequestType')?.value || '',
                                    details: document.getElementById('editRequestDetails')?.value || '',
                                    status: document.getElementById('editRequestStatus')?.value || 'pending'
                                };
                                localStorage.setItem('requests', JSON.stringify(requests));
                                showToast('Request updated', 'success');
                            }
                        }
                        break;
                        
                    case 'replyContact':
                        if (currentViewId) {
                            let contacts = JSON.parse(localStorage.getItem('contacts')) || [];
                            const index = contacts.findIndex(c => c.id === currentViewId);
                            if (index !== -1) {
                                if (!contacts[index].replies) contacts[index].replies = [];
                                contacts[index].replies.push({
                                    id: Date.now(),
                                    date: new Date().toLocaleString(),
                                    message: document.getElementById('replyMessage')?.value || '',
                                    admin: true
                                });
                                contacts[index].status = 'replied';
                                localStorage.setItem('contacts', JSON.stringify(contacts));
                                showToast('Reply sent', 'success');
                            }
                        }
                        break;
                        
                    case 'replyRequest':
                        if (currentViewId) {
                            let requests = JSON.parse(localStorage.getItem('requests')) || [];
                            const index = requests.findIndex(r => r.id === currentViewId);
                            if (index !== -1) {
                                if (!requests[index].replies) requests[index].replies = [];
                                requests[index].replies.push({
                                    id: Date.now(),
                                    date: new Date().toLocaleString(),
                                    message: document.getElementById('replyMessage')?.value || '',
                                    admin: true
                                });
                                requests[index].status = 'replied';
                                localStorage.setItem('requests', JSON.stringify(requests));
                                showToast('Reply sent', 'success');
                            }
                        }
                        break;
                        
                    case 'replyComment':
                        if (currentViewId) {
                            let comments = JSON.parse(localStorage.getItem('comments')) || [];
                            const index = comments.findIndex(c => c.id === currentViewId);
                            if (index !== -1) {
                                if (!comments[index].replies) comments[index].replies = [];
                                comments[index].replies.push({
                                    id: Date.now(),
                                    date: new Date().toLocaleString(),
                                    comment: document.getElementById('replyMessage')?.value || '',
                                    admin: true
                                });
                                localStorage.setItem('comments', JSON.stringify(comments));
                                showToast('Reply added', 'success');
                            }
                        }
                        break;
                }
                
                localStorage.setItem('siteData', JSON.stringify(siteData));
                closeModal();
                
                // Reload appropriate section
                const activeSection = document.querySelector('.nav-link.active')?.textContent.toLowerCase().trim();
                if (activeSection?.includes('site')) {
                    loadSiteContentData();
                } else if (activeSection?.includes('contact')) {
                    loadContactsData();
                } else if (activeSection?.includes('request')) {
                    loadRequestsData();
                } else if (activeSection?.includes('comment')) {
                    loadCommentsData();
                }
                
            } catch (error) {
                console.error('Error saving:', error);
                showToast('Error saving changes', 'error');
            }
        }
        
        // ==================== EXPORT/IMPORT FUNCTIONS ====================
        function exportContacts() {
            const contacts = JSON.parse(localStorage.getItem('contacts')) || [];
            downloadJSON(contacts, 'contacts_export.json');
            showToast('Contacts exported', 'success');
        }
        
        function exportRequests() {
            const requests = JSON.parse(localStorage.getItem('requests')) || [];
            downloadJSON(requests, 'requests_export.json');
            showToast('Requests exported', 'success');
        }
        
        function exportSiteData() {
            const siteData = JSON.parse(localStorage.getItem('siteData')) || {};
            downloadJSON(siteData, 'site_data_export.json');
            showToast('Site data exported', 'success');
        }
        
        function importSiteData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const data = JSON.parse(e.target.result);
                        localStorage.setItem('siteData', JSON.stringify(data));
                        showToast('Site data imported successfully', 'success');
                        loadSiteContentData();
                    } catch (error) {
                        showToast('Invalid JSON file', 'error');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }
        
        function downloadJSON(data, filename) {
            const dataStr = JSON.stringify(data, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }
        
        function backupData() {
            const backup = {
                siteData: JSON.parse(localStorage.getItem('siteData')) || {},
                contacts: JSON.parse(localStorage.getItem('contacts')) || [],
                requests: JSON.parse(localStorage.getItem('requests')) || [],
                comments: JSON.parse(localStorage.getItem('comments')) || [],
                appearance: JSON.parse(localStorage.getItem('appearance')) || {},
                backupDate: new Date().toISOString()
            };
            downloadJSON(backup, 'portfolio_backup.json');
            showToast('Backup created', 'success');
        }
        
        function restoreData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const backup = JSON.parse(e.target.result);
                        if (backup.siteData) localStorage.setItem('siteData', JSON.stringify(backup.siteData));
                        if (backup.contacts) localStorage.setItem('contacts', JSON.stringify(backup.contacts));
                        if (backup.requests) localStorage.setItem('requests', JSON.stringify(backup.requests));
                        if (backup.comments) localStorage.setItem('comments', JSON.stringify(backup.comments));
                        if (backup.appearance) localStorage.setItem('appearance', JSON.stringify(backup.appearance));
                        showToast('Data restored successfully', 'success');
                        location.reload();
                    } catch (error) {
                        showToast('Invalid backup file', 'error');
                    }
                };
                reader.readAsText(file);
            };
            input.click();
        }
        
        // ==================== APPEARANCE ====================
        function getAppearanceHTML() {
            return `
                <div class="page-header">
                    <div>
                        <h1>Appearance</h1>
                        <p>Customize your site's look and feel</p>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Color Scheme</h3>
                    <div class="settings-grid">
                        <div class="form-group">
                            <label>Primary Color</label>
                            <input type="color" class="form-control" id="primaryColor" value="#1a365d" style="height: 50px;">
                        </div>
                        <div class="form-group">
                            <label>Accent Color</label>
                            <input type="color" class="form-control" id="accentColor" value="#b59410" style="height: 50px;">
                        </div>
                        <div class="form-group">
                            <label>Background Color</label>
                            <input type="color" class="form-control" id="bgColor" value="#f8fafc" style="height: 50px;">
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Typography</h3>
                    <div class="settings-grid">
                        <div class="form-group">
                            <label>Heading Font</label>
                            <select class="form-control" id="headingFont">
                                <option value="Playfair Display">Playfair Display</option>
                                <option value="Georgia">Georgia</option>
                                <option value="Times New Roman">Times New Roman</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Body Font</label>
                            <select class="form-control" id="bodyFont">
                                <option value="Inter">Inter</option>
                                <option value="Arial">Arial</option>
                                <option value="Helvetica">Helvetica</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Layout Options</h3>
                    <div class="settings-grid">
                        <div class="checkbox-group">
                            <input type="checkbox" id="showSidebar" checked>
                            <label for="showSidebar">Show sidebar on portfolio</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="showRelated" checked>
                            <label for="showRelated">Show related projects</label>
                        </div>
                        <div class="checkbox-group">
                            <input type="checkbox" id="enableComments" checked>
                            <label for="enableComments">Enable comments on projects</label>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="save-btn" onclick="saveAppearance()">Save Appearance Settings</button>
                </div>
            `;
        }
        
        function loadAppearanceData() {
            const appearance = JSON.parse(localStorage.getItem('appearance')) || {};
            
            const primaryColor = document.getElementById('primaryColor');
            const accentColor = document.getElementById('accentColor');
            const bgColor = document.getElementById('bgColor');
            const headingFont = document.getElementById('headingFont');
            const bodyFont = document.getElementById('bodyFont');
            const showSidebar = document.getElementById('showSidebar');
            const showRelated = document.getElementById('showRelated');
            const enableComments = document.getElementById('enableComments');
            
            if (primaryColor) primaryColor.value = appearance.primaryColor || '#1a365d';
            if (accentColor) accentColor.value = appearance.accentColor || '#b59410';
            if (bgColor) bgColor.value = appearance.bgColor || '#f8fafc';
            if (headingFont) headingFont.value = appearance.headingFont || 'Playfair Display';
            if (bodyFont) bodyFont.value = appearance.bodyFont || 'Inter';
            if (showSidebar) showSidebar.checked = appearance.showSidebar !== false;
            if (showRelated) showRelated.checked = appearance.showRelated !== false;
            if (enableComments) enableComments.checked = appearance.enableComments !== false;
        }
        
        function saveAppearance() {
            const appearance = {
                primaryColor: document.getElementById('primaryColor')?.value || '#1a365d',
                accentColor: document.getElementById('accentColor')?.value || '#b59410',
                bgColor: document.getElementById('bgColor')?.value || '#f8fafc',
                headingFont: document.getElementById('headingFont')?.value || 'Playfair Display',
                bodyFont: document.getElementById('bodyFont')?.value || 'Inter',
                showSidebar: document.getElementById('showSidebar')?.checked || false,
                showRelated: document.getElementById('showRelated')?.checked || false,
                enableComments: document.getElementById('enableComments')?.checked || false
            };
            localStorage.setItem('appearance', JSON.stringify(appearance));
            showToast('Appearance settings saved!', 'success');
        }
        
        // ==================== SETTINGS ====================
        function getSettingsHTML() {
            return `
                <div class="page-header">
                    <div>
                        <h1>Settings</h1>
                        <p>Configure system settings</p>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Site Settings</h3>
                    <div class="form-group">
                        <label>Site Name</label>
                        <input type="text" class="form-control" id="siteName" value="David IGE Portfolio">
                    </div>
                    <div class="form-group">
                        <label>Admin Email</label>
                        <input type="email" class="form-control" id="adminEmail" value="admin@davidige.com">
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="commentModeration" checked>
                        <label for="commentModeration">Enable comment moderation</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="autoApproveComments">
                        <label for="autoApproveComments">Auto-approve comments from verified users</label>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Backup & Restore</h3>
                    <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                        <button class="action-btn" onclick="backupData()">
                            <span class="material-symbols-outlined">backup</span>
                            Backup Data
                        </button>
                        <button class="action-btn" onclick="restoreData()">
                            <span class="material-symbols-outlined">restore</span>
                            Restore Data
                        </button>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="save-btn" onclick="saveSettings()">Save Settings</button>
                </div>
            `;
        }
        
        function saveSettings() {
            showToast('Settings saved successfully!', 'success');
        }
        
        // ==================== PROFILE ====================
        function getProfileHTML() {
            return `
                <div class="page-header">
                    <div>
                        <h1>Profile</h1>
                        <p>Manage your admin profile</p>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Admin Profile</h3>
                    <div class="form-group">
                        <label>Username</label>
                        <input type="text" class="form-control" id="profileUsername" value="admin">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" class="form-control" id="profileEmail" value="admin@davidige.com">
                    </div>
                    <div class="form-group">
                        <label>Display Name</label>
                        <input type="text" class="form-control" id="profileDisplayName" value="Admin User">
                    </div>
                    <div class="form-group">
                        <label>New Password</label>
                        <input type="password" class="form-control" id="profilePassword" placeholder="Leave blank to keep current">
                    </div>
                    <div class="form-group">
                        <label>Confirm Password</label>
                        <input type="password" class="form-control" id="profileConfirmPassword" placeholder="Confirm new password">
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="save-btn" onclick="saveProfile()">Update Profile</button>
                </div>
            `;
        }
        
        function loadProfileData() {
            // Load profile data if needed
        }
        
        function saveProfile() {
            const password = document.getElementById('profilePassword')?.value;
            const confirmPassword = document.getElementById('profileConfirmPassword')?.value;
            
            if (password && password !== confirmPassword) {
                showToast('Passwords do not match', 'error');
                return;
            }
            
            showToast('Profile updated successfully!', 'success');
        }
        
        // ==================== MODAL FUNCTIONS ====================
        function openModal(title, content) {
            const modal = document.getElementById('editModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');
            
            if (modal && modalTitle && modalBody) {
                modalTitle.textContent = title;
                modalBody.innerHTML = content;
                modal.classList.add('active');
                document.body.style.overflow = 'hidden';
            }
        }
        
        function closeModal() {
            const modal = document.getElementById('editModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
            currentEditType = '';
            currentEditIndex = -1;
            currentViewId = null;
        }
        
        function closeViewModal() {
            const modal = document.getElementById('viewModal');
            if (modal) {
                modal.classList.remove('active');
                document.body.style.overflow = '';
            }
            currentViewId = null;
            currentViewType = '';
        }
    </script>
</body>
</html>